{"ast":null,"code":"var _jsxFileName = \"/Users/markvadimov/Desktop/bsu/react/notion/src/routes/Registration.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { User } from \"../util/validation\";\nimport { z } from \"zod\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { registerUser } from \"../redux/actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isValidEmail(email) {\n  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n  return emailRegex.test(email);\n}\nfunction Registration({\n  registerUser\n}) {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [nickname, setNickname] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n  const handleRegistration = async () => {\n    setErrors({});\n    if (!isValidEmail(email)) {\n      setErrors(prevErrors => ({\n        ...prevErrors,\n        email: \"Please enter a valid email address.\"\n      }));\n      return;\n    }\n    if (password !== confirmPassword) {\n      setErrors(prevErrors => ({\n        ...prevErrors,\n        confirmPassword: \"Passwords do not match.\"\n      }));\n      return;\n    }\n    const ageValue = parseInt(age, 10);\n    if (isNaN(ageValue) || ageValue < 1 || ageValue > 150) {\n      setErrors(prevErrors => ({\n        ...prevErrors,\n        age: \"Age must be a number between 1 and 150.\"\n      }));\n      return;\n    }\n    try {\n      const user = User.parse({\n        email,\n        password,\n        name,\n        nickname,\n        age: ageValue,\n        gender,\n        date: Date.now()\n      });\n      await registerUser(user);\n      navigate(\"/login\");\n    } catch (err) {\n      if (err instanceof z.ZodError) {\n        const fieldErrors = {};\n        err.issues.forEach(issue => {\n          const fieldName = issue.path.join(\".\");\n          fieldErrors[fieldName] = issue.message;\n        });\n        setErrors(prevErrors => ({\n          ...prevErrors,\n          ...fieldErrors\n        }));\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"registration-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold underline\",\n      children: \"Registration\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), errors.email && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: errors.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleRegistration,\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"If you already have an account, please\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        children: \"log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(Registration, \"vghzeoTepPEWWPhFCz035YrjwQE=\", false, function () {\n  return [useNavigate];\n});\n_c = Registration;\nconst mapDispatchToProps = {\n  registerUser: user => ({\n    type: \"REGISTER_USER\",\n    payload: user\n  })\n};\nexport default connect(null, mapDispatchToProps)(Registration);\nvar _c;\n$RefreshReg$(_c, \"Registration\");","map":{"version":3,"names":["React","useState","connect","User","z","useNavigate","Link","registerUser","jsxDEV","_jsxDEV","isValidEmail","email","emailRegex","test","Registration","_s","setEmail","password","setPassword","confirmPassword","setConfirmPassword","name","setName","nickname","setNickname","age","setAge","gender","setGender","errors","setErrors","navigate","handleRegistration","prevErrors","ageValue","parseInt","isNaN","user","parse","date","Date","now","err","ZodError","fieldErrors","issues","forEach","issue","fieldName","path","join","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","to","_c","mapDispatchToProps","payload","$RefreshReg$"],"sources":["/Users/markvadimov/Desktop/bsu/react/notion/src/routes/Registration.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { User } from \"../util/validation\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { registerUser } from \"../redux/actions\";\r\n\r\nfunction isValidEmail(email) {\r\n  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n  return emailRegex.test(email);\r\n}\r\n\r\nfunction Registration({ registerUser }) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [nickname, setNickname] = useState(\"\");\r\n  const [age, setAge] = useState(\"\");\r\n  const [gender, setGender] = useState(\"\");\r\n  const [errors, setErrors] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  const handleRegistration = async () => {\r\n    setErrors({});\r\n\r\n    if (!isValidEmail(email)) {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        email: \"Please enter a valid email address.\",\r\n      }));\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        confirmPassword: \"Passwords do not match.\",\r\n      }));\r\n      return;\r\n    }\r\n\r\n    const ageValue = parseInt(age, 10);\r\n\r\n    if (isNaN(ageValue) || ageValue < 1 || ageValue > 150) {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        age: \"Age must be a number between 1 and 150.\",\r\n      }));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const user = User.parse({\r\n        email,\r\n        password,\r\n        name,\r\n        nickname,\r\n        age: ageValue,\r\n        gender,\r\n        date: Date.now(),\r\n      });\r\n\r\n      await registerUser(user);\r\n\r\n      navigate(\"/login\");\r\n    } catch (err) {\r\n      if (err instanceof z.ZodError) {\r\n        const fieldErrors = {};\r\n        err.issues.forEach((issue) => {\r\n          const fieldName = issue.path.join(\".\");\r\n          fieldErrors[fieldName] = issue.message;\r\n        });\r\n        setErrors((prevErrors) => ({ ...prevErrors, ...fieldErrors }));\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"registration-form\">\r\n      <h1 className=\"text-3xl font-bold underline\">Registration</h1>\r\n      <div className=\"form-group\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        {errors.email && <div className=\"error\">{errors.email}</div>}\r\n      </div>\r\n      {/* ... Remaining JSX code ... */}\r\n      <button onClick={handleRegistration}>Register</button>\r\n      <p>\r\n        If you already have an account, please{\" \"}\r\n        <Link to=\"/login\">log in</Link>.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  registerUser: (user) => ({\r\n    type: \"REGISTER_USER\",\r\n    payload: user,\r\n  }),\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Registration);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}